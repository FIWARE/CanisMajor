version: "3.5"
services:
  ## CanisMajor setup

  canis-major:
    restart: always
    image: ${CANISMAJOR_IMAGE:-quay.io/fiware/canis-major}
    hostname: canis-major
    depends_on:
      - ganache-cli
    expose:
      - "4000"
    environment:
      - MICRONAUT_SERVER_PORT=4000
      - MICRONAUT_HTTP_SERVICES_NGSI_URL=http://orion:1026
      - ETHEREUM_CONTRACT_ADDRESS="0xE9632d32cC0F83437ac6312e1B35c90d60203C2d"
      - ETHEREUM_DLT_ADDRESS=ganache-cli:8545
      - GENERAL_NGSI_TENANT=orion
    networks:
      - test-network
    ports:
      - 4000:4000
